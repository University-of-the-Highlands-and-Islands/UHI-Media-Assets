/*
 typeahead.js 0.11.1
 https://github.com/twitter/typeahead.js
 Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT
 Funnelback auto-completion plugin
 version 2.6

 author: Liliana Nowak
 Copyright Funnelback, 2015-2017

 @requires jQuery https://jquery.com/
 @requires typeahead.js https://twitter.github.io/typeahead.js/
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,e,l){a instanceof String&&(a=String(a));for(var r=a.length,n=0;n<r;n++){var v=a[n];if(e.call(l,v,n,a))return{i:n,v:v}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,e,l){a!=Array.prototype&&a!=Object.prototype&&(a[e]=l.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,e,l,r){if(e){l=$jscomp.global;a=a.split(".");for(r=0;r<a.length-1;r++){var n=a[r];n in l||(l[n]={});l=l[n]}a=a[a.length-1];r=l[a];e=e(r);e!=r&&null!=e&&$jscomp.defineProperty(l,a,{configurable:!0,writable:!0,value:e})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,l){return $jscomp.findInternal(this,a,l).v}},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.arrayIterator=function(a){var e=0;return $jscomp.iteratorPrototype(function(){return e<a.length?{done:!1,value:a[e++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,e){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var l=0,r={next:function(){if(l<a.length){var n=l++;return{value:e(n,a[n]),done:!1}}r.next=function(){return{done:!0,value:void 0}};return r.next()}};r[Symbol.iterator]=function(){return r};return r};
$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
(function(a,e){"function"===typeof define&&define.amd?define("bloodhound",["jquery"],function(l){return a.Bloodhound=e(l)}):"object"===typeof exports?module.exports=e(require("jquery")):a.Bloodhound=e(jQuery)})(this,function(a){var e=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,
"\\$&")},isString:function(a){return"string"===typeof a},isNumber:function(a){return"number"===typeof a},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(a){return"undefined"===typeof a},isElement:function(a){return!(!a||1!==a.nodeType)},isJQuery:function(e){return e instanceof a},toStr:function(a){return e.isUndefined(a)||null===a?"":a+""},bind:a.proxy,each:function(e,h){a.each(e,function(a,b){return h(b,a)})},map:a.map,filter:a.grep,every:function(e,h){var d=
!0;if(!e)return d;a.each(e,function(b,a){if(!(d=h.call(null,a,b,e)))return!1});return!!d},some:function(e,h){var d=!1;if(!e)return d;a.each(e,function(b,a){if(d=h.call(null,a,b,e))return!1});return!!d},mixin:a.extend,identity:function(a){return a},clone:function(e){return a.extend(!0,{},e)},getIdGenerator:function(){var a=0;return function(){return a++}},templatify:function(e){function h(){return String(e)}return a.isFunction(e)?e:h},defer:function(a){setTimeout(a,0)},debounce:function(a,h,d){var b,
g;return function(){var c=this,t=arguments;var e=d&&!b;clearTimeout(b);b=setTimeout(function(){b=null;d||(g=a.apply(c,t))},h);e&&(g=a.apply(c,t));return g}},throttle:function(a,h){var d,b,g,c;var t=0;var e=function(){t=new Date;g=null;c=a.apply(d,b)};return function(){var y=new Date,f=h-(y-t);d=this;b=arguments;0>=f?(clearTimeout(g),g=null,t=y,c=a.apply(d,b)):g||(g=setTimeout(e,f));return c}},stringify:function(a){return e.isString(a)?a:JSON.stringify(a)},noop:function(){}}}(),l=function(){function a(b){return(b=
e.toStr(b))?b.split(/\s+/):[]}function h(b){return(b=e.toStr(b))?b.split(/\W+/):[]}function d(b){return function(a){a=e.isArray(a)?a:[].slice.call(arguments,0);return function(c){var g=[];e.each(a,function(a){g=g.concat(b(e.toStr(c[a])))});return g}}}return{nonword:h,whitespace:a,obj:{nonword:d(h),whitespace:d(a)}}}(),r=function(){function q(b){this.maxSize=e.isNumber(b)?b:100;this.reset();0>=this.maxSize&&(this.set=this.get=a.noop)}function h(){this.head=this.tail=null}function d(b,a){this.key=b;
this.val=a;this.prev=this.next=null}e.mixin(q.prototype,{set:function(b,a){var c=this.list.tail;this.size>=this.maxSize&&(this.list.remove(c),delete this.hash[c.key],this.size--);(c=this.hash[b])?(c.val=a,this.list.moveToFront(c)):(c=new d(b,a),this.list.add(c),this.hash[b]=c,this.size++)},get:function(b){if(b=this.hash[b])return this.list.moveToFront(b),b.val},reset:function(){this.size=0;this.hash={};this.list=new h}});e.mixin(h.prototype,{add:function(b){this.head&&(b.next=this.head,this.head.prev=
b);this.head=b;this.tail=this.tail||b},remove:function(b){b.prev?b.prev.next=b.next:this.head=b.next;b.next?b.next.prev=b.prev:this.tail=b.prev},moveToFront:function(b){this.remove(b);this.add(b)}});return q}(),n=function(){function q(b,a){this.prefix=["__",b,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=new RegExp("^"+e.escapeRegExChars(this.prefix));this.ls=a||d;!this.ls&&this._noop()}function h(b){return JSON.stringify(e.isUndefined(b)?null:b)}try{var d=window.localStorage;d.setItem("~~~",
"!");d.removeItem("~~~")}catch(b){d=null}e.mixin(q.prototype,{_prefix:function(b){return this.prefix+b},_ttlKey:function(b){return this._prefix(b)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=e.noop},_safeSet:function(b,a){try{this.ls.setItem(b,a)}catch(c){"QuotaExceededError"===c.name&&(this.clear(),this._noop())}},get:function(b){this.isExpired(b)&&this.remove(b);return a.parseJSON(this.ls.getItem(this._prefix(b)))},set:function(b,a,c){e.isNumber(c)?this._safeSet(this._ttlKey(b),
h((new Date).getTime()+c)):this.ls.removeItem(this._ttlKey(b));return this._safeSet(this._prefix(b),h(a))},remove:function(b){this.ls.removeItem(this._ttlKey(b));this.ls.removeItem(this._prefix(b));return this},clear:function(){var b=this.keyMatcher;var a,c,t=[],h=d.length;for(a=0;a<h;a++)(c=d.key(a)).match(b)&&t.push(c.replace(b,""));for(b=t.length;b--;)this.remove(t[b]);return this},isExpired:function(b){b=a.parseJSON(this.ls.getItem(this._ttlKey(b)));return e.isNumber(b)&&(new Date).getTime()>
b?!0:!1}});return q}(),v=function(){function q(c){c=c||{};this.cancelled=!1;this.lastReq=null;this._send=c.transport;this._get=c.limiter?c.limiter(this._get):this._get;this._cache=!1===c.cache?new r(0):g}var h=0,d={},b=6,g=new r(10);q.setMaxPendingRequests=function(c){b=c};q.resetCache=function(){g.reset()};e.mixin(q.prototype,{_fingerprint:function(c){c=c||{};return c.url+c.type+a.param(c.data||{})},_get:function(c,a){function g(c){a(null,c);k._cache.set(p,c)}function t(){a(!0)}function f(){h--;
delete d[p];k.onDeckRequestArgs&&(k._get.apply(k,k.onDeckRequestArgs),k.onDeckRequestArgs=null)}var k=this,e;var p=this._fingerprint(c);this.cancelled||p!==this.lastReq||((e=d[p])?e.done(g).fail(t):h<b?(h++,d[p]=this._send(c).done(g).fail(t).always(f)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(c,b){var g;b=b||a.noop;c=e.isString(c)?{url:c}:c||{};var d=this._fingerprint(c);this.cancelled=!1;this.lastReq=d;(g=this._cache.get(d))?b(null,g):this._get(c,b)},cancel:function(){this.cancelled=
!0}});return q}(),w=window.SearchIndex=function(){function q(b){b=b||{};b.datumTokenizer&&b.queryTokenizer||a.error("datumTokenizer and queryTokenizer are both required");this.identify=b.identify||e.stringify;this.datumTokenizer=b.datumTokenizer;this.queryTokenizer=b.queryTokenizer;this.reset()}function h(b){b=e.filter(b,function(b){return!!b});return b=e.map(b,function(b){return b.toLowerCase()})}function d(b){for(var a={},c=[],d=0,h=b.length;d<h;d++)a[b[d]]||(a[b[d]]=!0,c.push(b[d]));return c}e.mixin(q.prototype,
{bootstrap:function(b){this.datums=b.datums;this.trie=b.trie},add:function(b){var a=this;b=e.isArray(b)?b:[b];e.each(b,function(c){var b;a.datums[b=a.identify(c)]=c;c=h(a.datumTokenizer(c));e.each(c,function(c){var g;var f=a.trie;for(c=c.split("");g=c.shift();)f=f.c[g]||(f.c[g]={i:[],c:{}}),f.i.push(b)})})},get:function(b){var a=this;return e.map(b,function(c){return a.datums[c]})},search:function(b){var a=this,c;b=h(this.queryTokenizer(b));e.each(b,function(b){var g;if(c&&0===c.length)return!1;var d=
a.trie;for(b=b.split("");d&&(g=b.shift());)d=d.c[g];if(d&&0===b.length){g=d.i.slice(0);if(c){d=c;var f=b=0,k=[];d=d.sort();g=g.sort();for(var h=d.length,e=g.length;b<h&&f<e;)d[b]<g[f]?b++:(d[b]>g[f]||(k.push(d[b]),b++),f++);d=k}else d=g;c=d}else return c=[],!1});return c?e.map(d(c),function(b){return a.datums[b]}):[]},all:function(){var b=[],a;for(a in this.datums)b.push(this.datums[a]);return b},reset:function(){this.datums={};this.trie={i:[],c:{}}},serialize:function(){return{datums:this.datums,
trie:this.trie}}});return q}(),z=function(){function a(a){this.url=a.url;this.ttl=a.ttl;this.cache=a.cache;this.prepare=a.prepare;this.transform=a.transform;this.transport=a.transport;this.thumbprint=a.thumbprint;this.storage=new n(a.cacheKey)}e.mixin(a.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(a){this.cache&&(this.storage.set("data",a,this.ttl),this.storage.set("protocol",location.protocol,this.ttl),this.storage.set("thumbprint",this.thumbprint,
this.ttl))},fromCache:function(){if(!this.cache)return null;var a=this.storage.get("data");var d=this.storage.get("protocol");d=this.storage.get("thumbprint")!==this.thumbprint||d!==location.protocol;return a&&!d?a:null},fromNetwork:function(a){var d=this;if(a){var b=this.prepare(this._settings());this.transport(b).fail(function(){a(!0)}).done(function(b){a(null,d.transform(b))})}},clear:function(){this.storage.clear();return this}});return a}(),x=function(){function a(a){this.url=a.url;this.prepare=
a.prepare;this.transform=a.transform;this.transport=new v({cache:a.cache,limiter:a.limiter,transport:a.transport})}e.mixin(a.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(a,d){var b=this;if(d)return a=this.prepare(a||"",this._settings()),this.transport.get(a,function(a,c){a?d([]):d(b.transform(c))})},cancelLastRequest:function(){this.transport.cancel()}});return a}(),A=function(){function l(b){if(!b)return null;var c={url:null,ttl:864E5,cache:!0,cacheKey:null,
thumbprint:"",prepare:e.identity,transform:e.identity,transport:null};b=e.isString(b)?{url:b}:b;b=e.mixin(c,b);!b.url&&a.error("prefetch requires url to be set");b.transform=b.filter||b.transform;b.cacheKey=b.cacheKey||b.url;b.thumbprint="0.11.1"+b.thumbprint;b.transport=b.transport?g(b.transport):a.ajax;return b}function h(c){if(c){var t={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:e.identity,transport:null};c=e.isString(c)?
{url:c}:c;c=e.mixin(t,c);!c.url&&a.error("remote requires url to be set");c.transform=c.filter||c.transform;c.prepare=d(c);c.limiter=b(c);c.transport=c.transport?g(c.transport):a.ajax;delete c.replace;delete c.wildcard;delete c.rateLimitBy;delete c.rateLimitWait;return c}}function d(a){function b(a,b){b.url=k(b.url,a);return b}function c(a,b){b.url=b.url.replace(g,encodeURIComponent(a));return b}function d(a,b){return b}var f=a.prepare;var k=a.replace;var g=a.wildcard;return f?f:f=k?b:a.wildcard?
c:d}function b(a){function b(a){return function(b){return e.debounce(b,a)}}function c(a){return function(b){return e.throttle(b,a)}}var d=a.limiter;var f=a.rateLimitBy;a=a.rateLimitWait;d||(d=/^throttle$/i.test(f)?c(a):b(a));return d}function g(b){return function(c){var d=a.Deferred();b(c,function(a){e.defer(function(){d.resolve(a)})},function(a){e.defer(function(){d.reject(a)})});return d}}return function(b){b=e.mixin({initialize:!0,identify:e.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,
sorter:null,local:[],prefetch:null,remote:null},b||{});!b.datumTokenizer&&a.error("datumTokenizer is required");!b.queryTokenizer&&a.error("queryTokenizer is required");var c=b.sorter;b.sorter=c?function(b){return b.sort(c)}:e.identity;b.local=e.isFunction(b.local)?b.local():b.local;b.prefetch=l(b.prefetch);b.remote=h(b.remote);return b}}();return function(){function q(a){a=A(a);this.sorter=a.sorter;this.identify=a.identify;this.sufficient=a.sufficient;this.local=a.local;this.remote=a.remote?new x(a.remote):
null;this.prefetch=a.prefetch?new z(a.prefetch):null;this.index=new w({identify:this.identify,datumTokenizer:a.datumTokenizer,queryTokenizer:a.queryTokenizer});!1!==a.initialize&&this.initialize()}var h=window&&window.Bloodhound;q.noConflict=function(){window&&(window.Bloodhound=h);return q};q.tokenizers=l;e.mixin(q.prototype,{__ttAdapter:function(){function a(a,b,d){return g.search(a,b,d)}function b(a,b){return g.search(a,b)}var g=this;return this.remote?a:b},_loadPrefetch:function(){function d(a,
g){if(a)return c.reject();b.add(g);b.prefetch.store(b.index.serialize());c.resolve()}var b=this,g;var c=a.Deferred();this.prefetch?(g=this.prefetch.fromCache())?(this.index.bootstrap(g),c.resolve()):this.prefetch.fromNetwork(d):c.resolve();return c.promise()},_initialize:function(){var a=this;this.clear();(this.initPromise=this._loadPrefetch()).done(function(){a.add(a.local)});return this.initPromise},initialize:function(a){return!this.initPromise||a?this._initialize():this.initPromise},add:function(a){this.index.add(a);
return this},get:function(a){a=e.isArray(a)?a:[].slice.call(arguments);return this.index.get(a)},search:function(a,b,g){function c(a){var b=[];e.each(a,function(a){!e.some(h,function(b){return d.identify(a)===d.identify(b)})&&b.push(a)});g&&g(b)}var d=this;var h=this.sorter(this.index.search(a));b(this.remote?h.slice():h);this.remote&&h.length<this.sufficient?this.remote.get(a,c):this.remote&&this.remote.cancelLastRequest();return this},all:function(){return this.index.all()},clear:function(){this.index.reset();
return this},clearPrefetchCache:function(){this.prefetch&&this.prefetch.clear();return this},clearRemoteCache:function(){v.resetCache();return this},ttAdapter:function(){return this.__ttAdapter()}});return q}()});
(function(a,e){"function"===typeof define&&define.amd?define("typeahead.js",["jquery"],function(a){return e(a)}):"object"===typeof exports?module.exports=e(require("jquery")):e(jQuery)})(this,function(a){var e=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},
isString:function(a){return"string"===typeof a},isNumber:function(a){return"number"===typeof a},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(a){return"undefined"===typeof a},isElement:function(a){return!(!a||1!==a.nodeType)},isJQuery:function(e){return e instanceof a},toStr:function(a){return e.isUndefined(a)||null===a?"":a+""},bind:a.proxy,each:function(e,d){a.each(e,function(a,g){return d(g,a)})},map:a.map,filter:a.grep,every:function(e,d){var b=!0;if(!e)return b;
a.each(e,function(a,c){if(!(b=d.call(null,c,a,e)))return!1});return!!b},some:function(e,d){var b=!1;if(!e)return b;a.each(e,function(a,c){if(b=d.call(null,c,a,e))return!1});return!!b},mixin:a.extend,identity:function(a){return a},clone:function(e){return a.extend(!0,{},e)},getIdGenerator:function(){var a=0;return function(){return a++}},templatify:function(e){function d(){return String(e)}return a.isFunction(e)?e:d},defer:function(a){setTimeout(a,0)},debounce:function(a,d,b){var g,c;return function(){var e=
this,h=arguments;var m=b&&!g;clearTimeout(g);g=setTimeout(function(){g=null;b||(c=a.apply(e,h))},d);m&&(c=a.apply(e,h));return c}},throttle:function(a,d){var b,g,c,e;var h=0;var m=function(){h=new Date;c=null;e=a.apply(b,g)};return function(){var f=new Date,k=d-(f-h);b=this;g=arguments;0>=k?(clearTimeout(c),c=null,h=f,e=a.apply(b,g)):c||(c=setTimeout(m,k));return e}},stringify:function(a){return e.isString(a)?a:JSON.stringify(a)},noop:function(){}}}(),l=function(){function a(a){var b={};e.each(a,
function(a,c){b[c]="."+a});return b}function d(){var a={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};e.isMsie()&&e.mixin(a.input,
{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"});return a}var b={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return function(g){g=e.mixin({},b,g);var c={css:d(),classes:g,html:{wrapper:'<span class="'+g.wrapper+'"></span>',menu:'<div class="'+g.menu+'"></div>'},
selectors:a(g)};return{css:c.css,html:c.html,classes:c.classes,selectors:c.selectors,mixin:function(a){e.mixin(a,c)}}}}(),r=function(){function h(b){b&&b.el||a.error("EventBus initialized without el");this.$el=a(b.el)}var d={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"};e.mixin(h.prototype,{_trigger:function(b,g){b=a.Event("typeahead:"+b);(g=g||[]).unshift(b);this.$el.trigger.apply(this.$el,g);return b},before:function(a){var b=[].slice.call(arguments,
1);return this._trigger("before"+a,b).isDefaultPrevented()},trigger:function(a){var b;this._trigger(a,[].slice.call(arguments,1));(b=d[a])&&this._trigger(b,[].slice.call(arguments,1))}});return h}(),n=function(){function a(a,c,d,f){if(!d)return this;c=c.split(g);d=f?b(d,f):d;for(this._callbacks=this._callbacks||{};f=c.shift();)this._callbacks[f]=this._callbacks[f]||{sync:[],async:[]},this._callbacks[f][a].push(d);return this}function d(a,b,c){return function(){for(var f,k=0,d=a.length;!f&&k<d;k+=
1)f=!1===a[k].apply(b,c);return!f}}function b(a,b){return a.bind?a.bind(b):function(){a.apply(b,[].slice.call(arguments,0))}}var g=/\s+/,c=function(){return window.setImmediate?function(a){setImmediate(function(){a()})}:function(a){setTimeout(function(){a()},0)}}();return{onSync:function(b,c,d){return a.call(this,"sync",b,c,d)},onAsync:function(b,c,d){return a.call(this,"async",b,c,d)},off:function(a){var b;if(!this._callbacks)return this;for(a=a.split(g);b=a.shift();)delete this._callbacks[b];return this},
trigger:function(a){var b,e,f;if(!this._callbacks)return this;a=a.split(g);for(f=[].slice.call(arguments,1);(b=a.shift())&&(e=this._callbacks[b]);){var k=d(e.sync,this,[b].concat(f));var u=d(e.async,this,[b].concat(f));k()&&c(u)}return this}}}(),v=function(a){function d(a,b,d){for(var c=[],g=0,f=a.length;g<f;g++)c.push(e.escapeRegExChars(a[g]));a=d?"\\b("+c.join("|")+")\\b":"("+c.join("|")+")";return b?new RegExp(a):new RegExp(a,"i")}var b={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,
caseSensitive:!1};return function(g){function c(a,b){for(var f,k=0;k<a.childNodes.length;k++)f=a.childNodes[k],3===f.nodeType?k+=b(f)?1:0:c(f,b)}g=e.mixin({},b,g);if(g.node&&g.pattern){g.pattern=e.isArray(g.pattern)?g.pattern:[g.pattern];var h=d(g.pattern,g.caseSensitive,g.wordsOnly);c(g.node,function(b){var c;if(c=h.exec(b.data)){var f=a.createElement(g.tagName);g.className&&(f.className=g.className);var k=b.splitText(c.index);k.splitText(c[0].length);f.appendChild(k.cloneNode(!0));b.parentNode.replaceChild(f,
k)}return!!c})}}}(window.document),w=function(){function h(b,d){b=b||{};b.input||a.error("input is missing");d.mixin(this);this.$hint=a(b.hint);this.$input=a(b.input);this.query=this.$input.val();this.queryWhenFocused=this.hasFocus()?this.query:null;b=this.$input;this.$overflowHelper=a('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:b.css("font-family"),fontSize:b.css("font-size"),fontStyle:b.css("font-style"),fontVariant:b.css("font-variant"),
fontWeight:b.css("font-weight"),wordSpacing:b.css("word-spacing"),letterSpacing:b.css("letter-spacing"),textIndent:b.css("text-indent"),textRendering:b.css("text-rendering"),textTransform:b.css("text-transform")}).insertAfter(b);this._checkLanguageDirection();0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=e.noop)}var d={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};h.normalizeQuery=function(a){return e.toStr(a).replace(/^\s*/g,"").replace(/\s{2,}/g,
" ")};e.mixin(h.prototype,n,{_onBlur:function(){this.resetInputValue();this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query;this.trigger("focused")},_onKeydown:function(a){var b=d[a.which||a.keyCode];this._managePreventDefault(b,a);b&&this._shouldTrigger(b,a)&&this.trigger(b+"Keyed",a)},_onInput:function(){this._setQuery(this.getInputValue());this.clearHintIfInvalid();this._checkLanguageDirection()},_managePreventDefault:function(a,d){switch(a){case "up":case "down":a=!(d.altKey||
d.ctrlKey||d.metaKey||d.shiftKey);break;default:a=!1}a&&d.preventDefault()},_shouldTrigger:function(a,d){switch(a){case "tab":a=!(d.altKey||d.ctrlKey||d.metaKey||d.shiftKey);break;default:a=!0}return a},_checkLanguageDirection:function(){var a=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==a&&(this.dir=a,this.$hint.attr("dir",a),this.trigger("langDirChanged",a))},_setQuery:function(a,d){var b=this.query;var e=(b=h.normalizeQuery(a)===h.normalizeQuery(b))?this.query.length!==a.length:
!1;this.query=a;d||b?!d&&e&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var a=this;var g=e.bind(this._onBlur,this);var c=e.bind(this._onFocus,this);var h=e.bind(this._onKeydown,this);var y=e.bind(this._onInput,this);this.$input.on("blur.tt",g).on("focus.tt",c).on("keydown.tt",h);if(!e.isMsie()||9<e.isMsie())this.$input.on("input.tt",y);else this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(b){d[b.which||b.keyCode]||e.defer(e.bind(a._onInput,
a,b))});return this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(a,d){this.setInputValue(a);this._setQuery(a,d)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(a){this.$input.val(a);this.clearHintIfInvalid();this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},
getHint:function(){return this.$hint.val()},setHint:function(a){this.$hint.val(a)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var a=this.getInputValue();var d=this.getHint();d=a!==d&&0===d.indexOf(a);""!==a&&d&&!this.hasOverflow()||this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var a=this.$input.width()-2;this.$overflowHelper.text(this.getInputValue());return this.$overflowHelper.width()>=a},isCursorAtEnd:function(){var a=this.$input.val().length;
var d=this.$input[0].selectionStart;return e.isNumber(d)?d===a:document.selection?(d=document.selection.createRange(),d.moveStart("character",-a),a===d.text.length):!0},destroy:function(){this.$hint.off(".tt");this.$input.off(".tt");this.$overflowHelper.remove();this.$hint=this.$input=this.$overflowHelper=a("<div>")}});return h}(),z=function(){function h(c,h){c=c||{};c.templates=c.templates||{};c.templates.notFound=c.templates.notFound||c.templates.empty;c.source||a.error("missing source");c.node||
a.error("missing node");c.name&&!/^[_a-zA-Z0-9-]+$/.test(c.name)&&a.error("invalid dataset name: "+c.name);h.mixin(this);this.highlight=!!c.highlight;this.name=c.name||g();this.limit=c.limit||5;this.displayFn=d(c.display||c.displayKey);this.templates=b(c.templates,this.displayFn);this.source=c.source.__ttAdapter?c.source.__ttAdapter():c.source;this.async=e.isUndefined(c.async)?2<this.source.length:!!c.async;this._resetLastSuggestion();this.$el=a(c.node).addClass(this.classes.dataset).addClass(this.classes.dataset+
"-"+this.name)}function d(a){function b(b){return b[a]}a=a||e.stringify;return e.isFunction(a)?a:b}function b(b,d){function c(b){return a("<div>").text(d(b))}return{notFound:b.notFound&&e.templatify(b.notFound),pending:b.pending&&e.templatify(b.pending),header:b.header&&e.templatify(b.header),footer:b.footer&&e.templatify(b.footer),suggestion:b.suggestion||c}}var g=e.getIdGenerator();h.extractData=function(b){b=a(b);return b.data("tt-selectable-object")?{val:b.data("tt-selectable-display")||"",obj:b.data("tt-selectable-object")||
null}:null};e.mixin(h.prototype,n,{_overwrite:function(a,b){b=b||[];b.length?this._renderSuggestions(a,b):this.async&&this.templates.pending?this._renderPending(a):!this.async&&this.templates.notFound?this._renderNotFound(a):this._empty();this.trigger("rendered",this.name,b,!1)},_append:function(a,b){b=b||[];b.length&&this.$lastSuggestion.length?this._appendSuggestions(a,b):b.length?this._renderSuggestions(a,b):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(a);this.trigger("rendered",
this.name,b,!0)},_renderSuggestions:function(a,b){var c=this._getSuggestionsFragment(a,b);this.$lastSuggestion=c.children().last();this.$el.html(c).prepend(this._getHeader(a,b)).append(this._getFooter(a,b))},_appendSuggestions:function(a,b){a=this._getSuggestionsFragment(a,b);b=a.children().last();this.$lastSuggestion.after(a);this.$lastSuggestion=b},_renderPending:function(a){var b=this.templates.pending;this._resetLastSuggestion();b&&this.$el.html(b({query:a,dataset:this.name}))},_renderNotFound:function(a){var b=
this.templates.notFound;this._resetLastSuggestion();b&&this.$el.html(b({query:a,dataset:this.name}))},_empty:function(){this.$el.empty();this._resetLastSuggestion()},_getSuggestionsFragment:function(b,d){var c=this;var g=document.createDocumentFragment();e.each(d,function(f){var k=c._injectQuery(b,f);f=a(c.templates.suggestion(k)).data("tt-selectable-object",f).data("tt-selectable-display",c.displayFn(f)).addClass(c.classes.suggestion+" "+c.classes.selectable);g.appendChild(f[0])});this.highlight&&
v({className:this.classes.highlight,node:g,pattern:b});return a(g)},_getFooter:function(a,b){return this.templates.footer?this.templates.footer({query:a,suggestions:b,dataset:this.name}):null},_getHeader:function(a,b){return this.templates.header?this.templates.header({query:a,suggestions:b,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=a()},_injectQuery:function(a,b){return e.isObject(b)?e.mixin({_query:a},b):b},update:function(b){function c(a){f||(f=!0,a=(a||[]).slice(0,
d.limit),k=a.length,d._overwrite(b,a),k<d.limit&&d.async&&d.trigger("asyncRequested",b))}var d=this,e=!1,f=!1,k=0;this.cancel();this.cancel=function(){e=!0;d.cancel=a.noop;d.async&&d.trigger("asyncCanceled",b)};this.source(b,c,function(f){f=f||[];!e&&k<d.limit&&(d.cancel=a.noop,k+=f.length,d._append(b,f.slice(0,d.limit-k)),d.async&&d.trigger("asyncReceived",b))});!f&&c([])},cancel:a.noop,clear:function(){this._empty();this.cancel();this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},
destroy:function(){this.$el=a("<div>")}});return h}(),x=function(){function h(d,b){var g=this;d=d||{};d.node||a.error("node is required");b.mixin(this);this.$node=a(d.node);this.query=null;this.datasets=e.map(d.datasets,function(c){var d=g.$node.find(c.node).first();c.node=d.length?d:a("<div>").appendTo(g.$node);return new z(c,b)})}e.mixin(h.prototype,n,{_onSelectableClick:function(d){this.trigger("selectableClicked",a(d.currentTarget))},_onRendered:function(a,b,e,c){this.$node.toggleClass(this.classes.empty,
this._allDatasetsEmpty());this.trigger("datasetRendered",b,e,c)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty());this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){return e.every(this.datasets,function(a){return a.isEmpty()})},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var a=this.getActiveSelectable();a&&a.removeClass(this.classes.cursor)},
_ensureVisible:function(a){var b=a.position().top;a=b+a.outerHeight(!0);var d=this.$node.scrollTop();var c=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10);0>b?this.$node.scrollTop(d+b):c<a&&this.$node.scrollTop(d+(a-c))},bind:function(){var a=this;var b=e.bind(this._onSelectableClick,this);this.$node.on("click.tt",this.selectors.selectable,b);e.each(this.datasets,function(b){b.onSync("asyncRequested",a._propagate,a).onSync("asyncCanceled",
a._propagate,a).onSync("asyncReceived",a._propagate,a).onSync("rendered",a._onRendered,a).onSync("cleared",a._onCleared,a)});return this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open);this._removeCursor()},setLanguageDirection:function(a){this.$node.attr("dir",a)},selectableRelativeToCursor:function(a){var b=this.getActiveSelectable();var d=this._getSelectables();a=
((b?d.index(b):-1)+a+1)%(d.length+1)-1;a=-1>a?d.length-1:a;return-1===a?null:d.eq(a)},setCursor:function(a){this._removeCursor();if(a=a&&a.first())a.addClass(this.classes.cursor),this._ensureVisible(a)},getSelectableData:function(a){return a&&a.length?z.extractData(a):null},getActiveSelectable:function(){var a=this._getSelectables().filter(this.selectors.cursor).first();return a.length?a:null},getTopSelectable:function(){var a=this._getSelectables().first();return a.length?a:null},update:function(a){function b(b){b.update(a)}
var d=a!==this.query;d&&(this.query=a,e.each(this.datasets,b));return d},empty:function(){e.each(this.datasets,function(a){a.clear()});this.query=null;this.$node.addClass(this.classes.empty)},destroy:function(){this.$node.off(".tt");this.$node=a("<div>");e.each(this.datasets,function(a){a.destroy()})}});return h}(),A=function(){function a(){x.apply(this,[].slice.call(arguments,0))}var d=x.prototype;e.mixin(a.prototype,x.prototype,{open:function(){!this._allDatasetsEmpty()&&this._show();return d.open.apply(this,
[].slice.call(arguments,0))},close:function(){this._hide();return d.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show();return d._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show();return d._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(a){this.$node.css("ltr"===a?this.css.ltr:this.css.rtl);return d.setLanguageDirection.apply(this,
[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}});return a}(),q=function(){function h(b,g){b=b||{};b.input||a.error("missing input");b.menu||a.error("missing menu");b.eventBus||a.error("missing event bus");g.mixin(this);this.eventBus=b.eventBus;this.minLength=e.isNumber(b.minLength)?b.minLength:1;this.input=b.input;this.menu=b.menu;this.enabled=!0;this.active=!1;this.input.hasFocus()&&this.activate();this.dir=this.input.getLangDir();
this._hacks();this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this);b=d(this,"activate","open","_onFocused");g=d(this,"deactivate","_onBlurred");var c=d(this,"isActive","isOpen","_onEnterKeyed");var h=d(this,"isActive",
"isOpen","_onTabKeyed");var l=d(this,"isActive","_onEscKeyed");var m=d(this,"isActive","open","_onUpKeyed");var f=d(this,"isActive","open","_onDownKeyed");var k=d(this,"isActive","isOpen","_onLeftKeyed");var u=d(this,"isActive","isOpen","_onRightKeyed");var p=d(this,"_openIfActive","_onQueryChanged");var B=d(this,"_openIfActive","_onWhitespaceChanged");this.input.bind().onSync("focused",b,this).onSync("blurred",g,this).onSync("enterKeyed",c,this).onSync("tabKeyed",h,this).onSync("escKeyed",l,this).onSync("upKeyed",
m,this).onSync("downKeyed",f,this).onSync("leftKeyed",k,this).onSync("rightKeyed",u,this).onSync("queryChanged",p,this).onSync("whitespaceChanged",B,this).onSync("langDirChanged",this._onLangDirChanged,this)}function d(a){var b=[].slice.call(arguments,1);return function(){var c=[].slice.call(arguments);e.each(b,function(b){return a[b].apply(a,c)})}}e.mixin(h.prototype,{_hacks:function(){var b=this.input.$input||a("<div>");var d=this.menu.$node||a("<div>");b.on("blur.tt",function(a){var c=document.activeElement;
var g=d.is(c);c=0<d.has(c).length;e.isMsie()&&(g||c)&&(a.preventDefault(),a.stopImmediatePropagation(),e.defer(function(){b.focus()}))});d.on("mousedown.tt",function(a){a.preventDefault()})},_onSelectableClicked:function(a,d){this.select(d)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(a,d,c,e){this._updateHint();this.eventBus.trigger("render",c,e,d)},_onAsyncRequested:function(a,d,c){this.eventBus.trigger("asyncrequest",c,d)},_onAsyncCanceled:function(a,d,c){this.eventBus.trigger("asynccancel",
c,d)},_onAsyncReceived:function(a,d,c){this.eventBus.trigger("asyncreceive",c,d)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(a,d){var b;(b=this.menu.getActiveSelectable())&&this.select(b)&&d.preventDefault()},_onTabKeyed:function(a,d){var b;(b=this.menu.getActiveSelectable())?this.select(b)&&d.preventDefault():(b=
this.menu.getTopSelectable())&&this.autocomplete(b)&&d.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(a,d){this._minLengthMet(d)?this.menu.update(d):
this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(a,d){this.dir!==d&&(this.dir=d,this.menu.setLanguageDirection(d))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(a){a=e.isString(a)?a:this.input.getQuery()||"";return a.length>=this.minLength},_updateHint:function(){var a=this.menu.getTopSelectable();var d=this.menu.getSelectableData(a);a=this.input.getInputValue();if(!d||e.isBlankString(a)||this.input.hasOverflow())this.input.clearHint();
else{var c=w.normalizeQuery(a);c=e.escapeRegExChars(c);c=new RegExp("^(?:"+c+")(.+$)","i");(d=c.exec(d.val))&&this.input.setHint(a+d[1])}},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){if(this.isActive())return!0;if(!this.isEnabled()||this.eventBus.before("active"))return!1;this.active=!0;this.eventBus.trigger("active");return!0},deactivate:function(){if(this.isActive()){if(this.eventBus.before("idle"))return!1;
this.active=!1;this.close();this.eventBus.trigger("idle")}return!0},isOpen:function(){return this.menu.isOpen()},open:function(){this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open"));return this.isOpen()},close:function(){this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close"));return!this.isOpen()},setVal:function(a){this.input.setQuery(e.toStr(a))},
getVal:function(){return this.input.getQuery()},select:function(a){return(a=this.menu.getSelectableData(a))&&!this.eventBus.before("select",a.obj)?(this.input.setQuery(a.val,!0),this.eventBus.trigger("select",a.obj),this.close(),!0):!1},autocomplete:function(a){var b=this.input.getQuery();return(a=this.menu.getSelectableData(a))&&b!==a.val&&!this.eventBus.before("autocomplete",a.obj)?(this.input.setQuery(a.val),this.eventBus.trigger("autocomplete",a.obj),!0):!1},moveCursor:function(a){var b;var c=
this.input.getQuery();a=this.menu.selectableRelativeToCursor(a);var d=(b=this.menu.getSelectableData(a))?b.obj:null;return this._minLengthMet()&&this.menu.update(c)||this.eventBus.before("cursorchange",d)?!1:(this.menu.setCursor(a),b?this.input.setInputValue(b.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",d),!0)},destroy:function(){this.input.destroy();this.menu.destroy()}});return h}();(function(){function h(b,f){b.each(function(){var b=a(this),c;(c=
b.data(m.typeahead))&&f(c,b)})}function d(a,b){return a.clone().addClass(b.classes.hint).removeData().css(b.css.hint).css(g(a)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}function b(a,b){a.data(m.attrs,{dir:a.attr("dir"),autocomplete:a.attr("autocomplete"),spellcheck:a.attr("spellcheck"),style:a.attr("style")});a.addClass(b.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!a.attr("dir")&&a.attr("dir","auto")}catch(p){}return a}
function g(a){return{backgroundAttachment:a.css("background-attachment"),backgroundClip:a.css("background-clip"),backgroundColor:a.css("background-color"),backgroundImage:a.css("background-image"),backgroundOrigin:a.css("background-origin"),backgroundPosition:a.css("background-position"),backgroundRepeat:a.css("background-repeat"),backgroundSize:a.css("background-size")}}function c(a){var b=a.data(m.www);var f=a.parent().filter(b.selectors.wrapper);e.each(a.data(m.attrs),function(b,f){e.isUndefined(b)?
a.removeAttr(f):a.attr(f,b)});a.removeData(m.typeahead).removeData(m.www).removeData(m.attr).removeClass(b.classes.input);f.length&&(a.detach().insertAfter(f),f.remove())}function t(b){b=e.isJQuery(b)||e.isElement(b)?a(b).first():[];return b.length?b:null}var n=a.fn.typeahead;var m={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"};var f={initialize:function(f,c){c=e.isArray(c)?c:[].slice.call(arguments,1);f=f||{};var k=l(f.classNames);return this.each(function(){e.each(c,function(a){a.highlight=
!!f.highlight});var g=a(this);var h=a(k.html.wrapper);var u=t(f.hint);var p=t(f.menu);var l=!1!==f.hint&&!u;var n=!1!==f.menu&&!p;l&&(u=d(g,k));n&&(p=a(k.html.menu).css(k.css.menu));u&&u.val("");g=b(g,k);if(l||n)h.css(k.css.wrapper),g.css(l?k.css.input:k.css.inputWithNoHint),g.wrap(h).parent().prepend(l?u:null).append(n?p:null);l=n?A:x;h=new r({el:g});u=new w({hint:u,input:g},k);p=new l({node:p,datasets:c},k);p=new q({input:u,menu:p,eventBus:h,minLength:f.minLength},k);g.data(m.www,k);g.data(m.typeahead,
p)})},isEnabled:function(){var a;h(this.first(),function(b){a=b.isEnabled()});return a},enable:function(){h(this,function(a){a.enable()});return this},disable:function(){h(this,function(a){a.disable()});return this},isActive:function(){var a;h(this.first(),function(b){a=b.isActive()});return a},activate:function(){h(this,function(a){a.activate()});return this},deactivate:function(){h(this,function(a){a.deactivate()});return this},isOpen:function(){var a;h(this.first(),function(b){a=b.isOpen()});return a},
open:function(){h(this,function(a){a.open()});return this},close:function(){h(this,function(a){a.close()});return this},select:function(b){var f=!1,c=a(b);h(this.first(),function(a){f=a.select(c)});return f},autocomplete:function(b){var f=!1,c=a(b);h(this.first(),function(a){f=a.autocomplete(c)});return f},moveCursor:function(a){var b=!1;h(this.first(),function(f){b=f.moveCursor(a)});return b},val:function(a){var b;if(arguments.length)return h(this,function(b){b.setVal(a)}),this;h(this.first(),function(a){b=
a.getVal()});return b},destroy:function(){h(this,function(a,b){c(b);a.destroy()});return this}};a.fn.typeahead=function(a){return f[a]?f[a].apply(this,[].slice.call(arguments,1)):f.initialize.apply(this,arguments)};a.fn.typeahead.noConflict=function(){a.fn.typeahead=n;return this}})()});
(function(a){function e(b){var f=!1;if(!a.isObject(b.datasets))return f;a.each(b.datasets,function(b,c){a.exist(c.collection,!0)&&(f=!0)});return f}function l(b,c){var f={};a.each(y,function(a,c){f[c]=b[c]});a.each(c,function(b,d){c[b]=a.extend(!0,{},f,d)});return c}function r(b,c){function f(f){if(!a.exist(f,!0))return f;f=decodeURIComponent(f);return f.substring(f.lastIndexOf(b.queryKey+"=")+(b.queryKey.length+1),f.lastIndexOf("GET"))}var d=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),
queryTokenizer:Bloodhound.tokenizers.whitespace,remote:function(){var d={url:b.url?b.url:n(b),filter:function(d){var e=f(a(this).get(0).transport.lastReq);return w(b,a.map(d,function(a,f){return b.transform(b,a,f,c,e)}))}};"jsonp"===b.dataType?d.prepare=function(a,f){f.dataType="jsonp";f.url=f.url.replace(b.queryVal,a);return f}:d.wildcard=b.queryVal;return d}()});d.initialize();return{name:c,limit:1E4,source:function(f,c,e){if(1>f.length&&b.defaultCall)if(a.isString(b.defaultCall))f=b.defaultCall;
else{if(a.isArray(b.defaultCall)){c(w(b,b.defaultCall));return}if(a.exist(b.defaultCall.data)){c(w(b,b.defaultCall.transform(b,b.defaultCall.data)));return}a.exist(b.defaultCall.url,!0)&&a.get(b.defaultCall.url,b.defaultCall.params,function(a){e(w(b.defaultCall.transform(b,a)))})}d.search(f,c,e)},display:function(f){return a.isFunction(b.itemLabel)?b.itemLabel.call(void 0,f):a.dataVals(f,b.itemLabel)},templates:x(b)}}function n(b){var f={collection:b.collection};a.exist(b.format,!0)&&(f.fmt="simple"==
b.format?"json":"json++");a.exist(b.alpha,!0)&&(f.alpha=b.alpha);a.exist(b.profile,!0)&&(f.profile=b.profile);a.exist(b.show,!0)&&(f.show=b.show);a.exist(b.sort,!0)&&(f.sort=b.sort);a.isObject(b.param)&&(f=a.extend(!0,{},f,b.params));return b.program+"?"+a.param(f)+"&"+b.queryKey+"="+b.queryVal}function v(b,c){var f={"":[]},d;if(a.exist(b.groupOrder)){var e=0;for(d=b.groupOrder.length;e<d;e++)f[b.groupOrder[e]]=[{label:b.groupOrder[e]}]}e=0;for(d=c.length;e<d;e++)a.exist(f[c[e][b.itemGroup]])||(f[c[e][b.itemGroup]]=
[{label:c[e][b.itemGroup]}]),f[c[e][b.itemGroup]].push(c[e]);c=[];a.each(f,function(b,f){1<f.length&&(a.exist(b,!0)||f.splice(0,1),a.merge(c,f))});return c}function w(b,c){c=c.slice(0,b.show);b.callback&&a.isFunction(b.callback)&&(c=b.callback.call(void 0,b,c)||[]);return b.group?v(b,c):c}function z(b,c,d){var f=0,e=0,k,g,h=b.width();d="."+d;c="."+c;a.each(b.children(d),function(){g=a(this).attr("class").split(" ");k=a.cssStyle(c+" ."+g[1])||a.cssStyle(c+" ."+g.join("."));k.width&&k.width.indexOf("important")&&
0>k.width.indexOf("auto")&&0>k.width.indexOf("initial")&&0>k.width.indexOf("inherit")?e=0<k.width.indexOf("%")?e+h*parseFloat(k.width)/100:e+parseFloat(k.width):a.hasContent(a(this))&&f++});if(f){h-=e+.5;var u=parseFloat(b.children(d).css("min-width")),l=h/f;u<=l&&b.children(d).css("width",l+"px")}}function x(b){function c(c){b.template[c]&&a.isString(b.template[c])&&(b.template.header&&a.isString(b.template.header)&&(b.template[c]=b.template.header+b.template[c]),b.template.footer&&a.isString(b.template.footer)&&
(b.template[c]+=b.template.footer))}A(b);if(!b.template||a.isEmptyObject(b.template))return{};a.each(b.template,function(c,f){a.isObject(f)&&(b.template[c]=f.prop("outerHTML"))});b.templateMerge&&(c("notFound"),c("pending"));a.each(b.template,function(c,f){a.isString(f)&&(b.template[c]=Handlebars.compile(f))});return b.template}function A(b){!b.template.header&&a.exist(b.name,!0)&&(b.template.header='<h5 class="tt-category">'+b.name+"</h5>")}function q(b,c){if(a.exist(b.extra))switch(b.extra.action_t){case "C":eval(b.extra.action);
break;case "U":document.location=b.extra.action;break;case "E":c.typeahead("val",b.extra.action);break;default:c.val(b.value),c.closest("form").submit()}else c.val(b.value),c.closest("form").submit()}function h(b){return a.exist(b.data())?b.data().ttSelectableDisplay:b.text()}function d(b,c,d){function f(d){d=37==b?a.exist(c[d-1])?d-1:c.length-1:a.exist(c[d+1])?d+1:0;var e=a(c[d]).children(".tt-selectable");return a.exist(e)?e:f(d)}if(a.exist(m.cursor)){var e=m.cursor.parent(),k=c.index(e);k=f(k);
e=a(e).children(".tt-selectable").index(m.cursor);e=a.exist(k[e])?k[e]:k[k.length-1];a(m.cursor).removeClass("tt-cursor");m.cursor=a(e).addClass("tt-cursor");d.data().ttTypeahead.input.setInputValue(h(m.cursor))}}function b(b,c,d){if(a.exist(c.find(".tt-cursor"))){if(c=m.cursor.parent(),c=a(c).children(".tt-selectable"),a.exist(c)){var f=c.index(m.cursor);b=38==b?-1:1;a(m.cursor).removeClass("tt-cursor");a.exist(c[f+b])?(m.cursor=a(c[f+b]).addClass("tt-cursor"),d.data().ttTypeahead.input.setInputValue(h(m.cursor))):
(m.cursor=null,d.data().ttTypeahead.input.resetInputValue(),d.data().ttTypeahead._updateHint())}}else m.cursor=38==b?c.find(".tt-selectable").last():c.find(".tt-selectable").first(),m.cursor.addClass("tt-cursor"),m.query=d.val(),d.data().ttTypeahead.input.setInputValue(h(m.cursor))}function g(b,c,d,e){b.logging&&a.exist(b.interactionLog,!0)&&c.dataset&&b.datasets[c.dataset]&&a.ajax({dataType:"jsonp",type:"GET",url:function(c,d){var f={collection:c.collection,type:e,partial_query:d.query,client_time:(new Date).getTime()};
a.exist(c.profile,!0)&&(f.profile=c.profile);a.exist(d.extra)&&(f=a.extend(!0,{},f,d.extra));return b.interactionLog+"?"+a.param(f)}(b.datasets[c.dataset],c)}).fail(function(a,d,f){t&&window.console&&(console.log("Interaction log error: "+d+" "+f),console.log("Options: ",b),console.log("Input: ",c),console.log("Output: ",a),console.log("--------"))})}var c=function(b,c){this.$element=a(b);this.options=c;this.init()};c.defaults={datasets:null,callback:null,group:!1,groupOrder:[],facets:{blacklist:[],
whitelist:[],show:2,url:null},itemGroup:"category",itemLabel:"value",template:{group:function(b){return a("<div>").html(String(b.label))},suggestion:function(b){return a("<div>").html(String(b.label))}},templateMerge:!0,transform:function(b,c,d,e,g){return a.autocompletion.processSetData(b,c,d,e,g)},collection:null,dataType:"json",alpha:"0.5",format:"extended",params:null,profile:"_default",program:"/s/suggest.json",show:10,sort:0,queryKey:"partial_query",queryVal:"%QUERY",length:3,horizontal:!1,
scrollable:!1,logging:!0,interactionLog:"/s/log",typeahead:{classNames:{},highlight:!0,hint:!1,events:{select:function(b,c){q(c,a(b.target))},afterselect:function(b,c){"E"==c.extra.action_t&&a(b.target).focus()}}}};c.prototype.init=function(){this.option(this.options);e(this.options)?this.initTypeahead():this.destroy()};c.prototype.destroy=function(){this.$element.typeahead("destroy");this.$element=null;this.options={}};c.prototype.option=function(b,c){function d(a,b){"datasets"===a&&(f.options[a]=
l(f.options,b));"debug"===a&&(t=b);"horizontal"===a&&b&&(f.setTypeaheadClass("menu","tt-horizontal"),f.options.typeahead.events.render=function(a){z(f.getTypeaheadMenu(),"tt-horizontal","tt-dataset")});"scrollable"===a&&b&&f.setTypeaheadClass("menu","tt-scrollable")}if(0===arguments.length)return this.options;var f=this,e=a.isObject(b)?b:{};if(a.isString(b)){if(1===arguments.length||!a.isDefinied(c))return a.dataVals(a.extend({},f.options),b);e[b]=c}for(var g in e)d(g,e[g])};c.prototype.horizontal=
function(a){return this.option("horizontal",a)};c.prototype.scrollable=function(a){return this.option("scrollable",a)};c.prototype.initTypeahead=function(){var c=this,e=[];a.each(c.options.datasets,function(a,b){e.push(r(b,a))});c.$element.typeahead({minLength:parseInt(c.options.length),hint:c.options.typeahead.hint,highlight:c.options.typeahead.highlight,classNames:c.options.typeahead.classNames},e);c.options.typeahead.events&&a.each(c.options.typeahead.events,function(a,b){c.$element.on("typeahead:"+
a,b)});if(c.options.horizontal){e=c.$element.data();var h=c.getTypeaheadMenu();e.ttTypeahead._onDownKeyed=function(){b(40,h,c.$element)};e.ttTypeahead._onUpKeyed=function(){b(38,h,c.$element)};var p=h.children(".tt-dataset");1<p.size()&&(e.ttTypeahead._onLeftKeyed=function(){d(37,p,c.$element)},e.ttTypeahead._onRightKeyed=function(){d(39,p,c.$element)});c.$element.on("keydown",function(b){b=b.keyCode||b.which;if(38==b||40==b||(37==b||39==b)&&a.exist(m.cursor))return!1})}if(c.options.logging)c.$element.on("typeahead:select",
function(b,d){g(c.options,d,a(b.target),"select")})};c.prototype.destroyTypeahead=function(){this.$element.typeahead("destroy")};c.prototype.getTypeaheadMenu=function(){return this.$element.siblings(".tt-menu")};c.prototype.setTypeaheadClass=function(b,c){a.exist(this.options.typeahead.classNames[b],!0)||(this.options.typeahead.classNames[b]="tt-"+b);this.options.typeahead.classNames[b]+=" "+c};var t=!1,y="collection callback dataType alpha facets transform format group groupOrder itemGroup itemLabel params profile program show sort queryKey queryVal template templateMerge".split(" "),
m={cursor:null,query:""};a.fn.autocompletion=function(){var b=[].slice.call(arguments),d=b.shift();return this.each(function(){var e=a(this),f=e.data("flb.autocompletion"),g=a.extend(!0,{},c.defaults,f||{},a.isObject(d)&&d);if(f||!/destroy|hide/.test(d))f||e.data("flb.autocompletion",f=new c(this,g)),a.isString(d)&&a.isFunction(f[d])&&f[d].apply(e,b)})};a.fn.autocompletion.Constructor=c;a.autocompletion={processSetData:function(a,b,c,d,e){var f=a=b.key;"Q"==b.action_t&&(a=b.action);"S"==b.action_t&&
(a=b.disp);"C"==b.disp_t?f=eval(b.disp):b.disp&&(f=b.disp);return{label:f,value:a,extra:b,category:b.cat?b.cat:"",rank:c+1,dataset:d,query:e}},processSetDataFacets:function(b,c,d,e,g){function f(c){return(a.exist(b.facets.url,!0)?b.facets.url:window.location.origin+window.location.pathname)+c.toggleUrl}if("response"===d&&a.exist(c.facets)){var h=[],k=1;d=0;for(var l=c.facets.length;d<l;d++){var p=c.facets[d];if(a.exist(p.allValues)&&!(a.exist(b.facets.blacklist)&&-1<b.facets.blacklist.indexOf(p.name)||
a.exist(b.facets.whitelist)&&0>b.facets.whitelist.indexOf(p.name)))for(var m=0,n=p.allValues.length;m<n&&!(a.exist(b.facets.show)&&m>parseInt(b.facets.show)-1);m++)p.allValues[m].count&&h.push({label:p.allValues[m].label,value:p.allValues[m].data,extra:{action:f(p.allValues[m]),action_t:"U"},category:p.name,rank:k++,dataset:e,query:g})}return h}}};a.exist=function(b,c){a.isDefinied(c)||(c=!1);b=c?b:a(b);return a.isDefinied(b)&&null!=b&&0<(a.isString(b)?b+"":b).length};a.hasContent=function(a){return a.html().trim().length?
!0:!1};a.isDefinied=function(a){return"undefined"!==typeof a};a.isFunction=function(a){return"function"===typeof a};a.isString=function(a){return"string"===typeof a};a.isObject=function(a){return"object"===typeof a};a.dataKeys=function(b){function c(b,d){return a.map(Object.keys(b),function(e){return b[e]&&a.isObject(b[e])?c(b[e],e):d?d+"-"+e:e})}return c(b,"")};a.dataVals=function(a,b){var c=b.split(".");b=c.shift();if(c.length)for(var d=0,e=c.length;d<e;d++)a=a[b]||{},b=c[d];return a[b]};a.cssStyle=
function(a){for(var b=window.document.styleSheets,c={},d=0,e=b.length;d<e;d++)if(!(b[d].href&&0>b[d].href.indexOf(window.location.host))){var f=b[d].rules||b[d].cssRules;if(f)for(var g=0,h=f.length;g<h;g++)if(f[g].selectorText==a)for(var m=f[g].style.cssText.split(";"),l=0,n=m.length;l<n;l++){var q=m[l].split(":");2==q.length&&(c[q[0].trim()]=q[1].trim())}}return c}})(jQuery);String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};
jQuery(document).ready(function(){jQuery('input[name="query"]').closest("form").find('input[type="submit"][id="submit"]').removeAttr("id");jQuery('input[name="query"]').closest("form").find('input[type="submit"][name="submit"]').removeAttr("name");jQuery('input[name="query"]').autocompletion({datasets:{organic:{collection:"university-meta",profile:"_default",program:"https://search.uhi.ac.uk/s/suggest.json",format:"extended",alpha:"0.5",show:"10",sort:"0",group:!0}},typeahead:{hint:!0},length:3,logging:!1});
jQuery('input[name="query"]').closest("form").find('input[type="text"]').first().attr("id","funnelbackInjected");jQuery("#funnelbackInjected").attr('title',"Search suggestions");}); //# sourceMappingURL=/en/t4-media/one-web/university/admin-assets/js/map/funnelback.autocompletion-min.js.map
